<UserControl
    x:Class="Eventa.Views.Ordering.TicketOrderView"
    xmlns="https://github.com/avaloniaui"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:vm="clr-namespace:Eventa.ViewModels.Ordering;assembly=Eventa"
    d:DesignHeight="750"
    d:DesignWidth="400"
    x:DataType="vm:TicketOrderViewModel"
    mc:Ignorable="d">

    <UserControl.Styles>
        <Style Selector="TextBlock">
            <Setter Property="FontFamily" Value="{StaticResource Kadwa}" />
        </Style>

        <Style Selector="TextBox">
            <Setter Property="FontFamily" Value="{StaticResource Kadwa}" />
            <Setter Property="Padding" Value="12,10" />
            <Setter Property="BorderBrush" Value="#E0E0E0" />
            <Setter Property="BorderThickness" Value="1" />
            <Setter Property="CornerRadius" Value="8" />
            <Setter Property="Background" Value="White" />
        </Style>

        <Style Selector="Button.SubmitButton">
            <Setter Property="Background" Value="#FFB5B5" />
            <Setter Property="Foreground" Value="White" />
            <Setter Property="BorderThickness" Value="0" />
            <Setter Property="HorizontalContentAlignment" Value="Center" />
            <Setter Property="VerticalContentAlignment" Value="Center" />
            <Setter Property="CornerRadius" Value="20" />
            <Setter Property="Padding" Value="0,12" />
            <Setter Property="Cursor" Value="Hand" />
            <Setter Property="FontFamily" Value="{StaticResource Kadwa}" />
            <Setter Property="FontSize" Value="14" />
            <Setter Property="FontWeight" Value="SemiBold" />
            <Setter Property="HorizontalAlignment" Value="Stretch" />
        </Style>

        <Style Selector="Button.SubmitButton:pointerover /template/ ContentPresenter">
            <Setter Property="Background" Value="#FF9999" />
        </Style>

        <Style Selector="Button.SubmitButton:disabled /template/ ContentPresenter">
            <Setter Property="Background" Value="#D0D0D0" />
        </Style>

        <Style Selector="Button.GooglePayButton">
            <Setter Property="Background" Value="White" />
            <Setter Property="Foreground" Value="#5F6368" />
            <Setter Property="BorderBrush" Value="#E0E0E0" />
            <Setter Property="BorderThickness" Value="1" />
            <Setter Property="CornerRadius" Value="20" />
            <Setter Property="Padding" Value="0,12" />
            <Setter Property="Cursor" Value="Hand" />
            <Setter Property="FontFamily" Value="{StaticResource Kadwa}" />
            <Setter Property="FontSize" Value="14" />
            <Setter Property="HorizontalAlignment" Value="Stretch" />
        </Style>

        <Style Selector="Button.GooglePayButton:pointerover /template/ ContentPresenter">
            <Setter Property="Background" Value="#F8F9FA" />
        </Style>
    </UserControl.Styles>

    <ScrollViewer>
        <StackPanel Margin="24,16" Spacing="20">
            <!--  Order Summary Card  -->
            <Border
                Padding="16"
                Background="White"
                BoxShadow="0 2 8 0 #20000000"
                CornerRadius="12">
                <StackPanel Spacing="12">
                    <TextBlock
                        FontSize="14"
                        FontWeight="SemiBold"
                        Foreground="#FFB5B5"
                        Text="{Binding EventName}"
                        TextAlignment="Center" />

                    <TextBlock
                        FontSize="16"
                        Foreground="#666666"
                        Text="{Binding TimeLeftDisplay}"
                        TextAlignment="Center" />

                    <TextBlock
                        FontSize="12"
                        Foreground="#666666"
                        Text="{Binding EventDateTime, StringFormat='[{0}]'}"
                        TextAlignment="Center" />

                    <!--  Ticket List  -->
                    <StackPanel Spacing="6">
                        <ItemsControl ItemsSource="{Binding TicketsInOrder}">
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <Grid
                                        Margin="0,4"
                                        ColumnDefinitions="*,Auto"
                                        ColumnSpacing="8">
                                        <StackPanel Grid.Column="0" Spacing="2">
                                            <TextBlock FontSize="11" Foreground="#666666">
                                                <Run Text="Sector:" />
                                                <Run FontWeight="SemiBold" Text="{Binding RowTypeName}" />
                                            </TextBlock>
                                            <TextBlock FontSize="11" Foreground="#666666">
                                                <Run Text="Row:" />
                                                <Run Text="{Binding RowNumber}" />
                                                <Run Text=" | Place:" />
                                                <Run Text="{Binding SeatNumber}" />
                                            </TextBlock>
                                        </StackPanel>
                                        <TextBlock
                                            Grid.Column="1"
                                            VerticalAlignment="Center"
                                            FontSize="12"
                                            FontWeight="SemiBold"
                                            Foreground="#333333"
                                            Text="{Binding Price, StringFormat='[{0:F2}]'}" />
                                    </Grid>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                    </StackPanel>

                    <Border
                        Height="1"
                        Margin="0,4"
                        Background="#E0E0E0" />

                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>

                        <TextBlock
                            Grid.Column="0"
                            FontSize="14"
                            FontWeight="SemiBold"
                            Foreground="#333333"
                            Text="Total price:" />

                        <TextBlock
                            Grid.Column="1"
                            FontSize="16"
                            FontWeight="Bold"
                            Foreground="#FFB5B5"
                            Text="{Binding TotalPrice, StringFormat='[{0:F2}]'}" />
                    </Grid>
                </StackPanel>
            </Border>

            <!--  Card Information  -->
            <StackPanel IsVisible="{Binding HasTickets}" Spacing="12">
                <TextBlock
                    FontSize="14"
                    FontWeight="SemiBold"
                    Foreground="#333333"
                    Text="Card information" />

                <!--  Card Number  -->
                <Grid>
                    <TextBox
                        Padding="12,10,40,10"
                        MaxLength="19"
                        Text="{Binding CardNumber}"
                        Watermark="1234 1234 1234 1234" />
                    <StackPanel
                        Margin="0,0,12,0"
                        HorizontalAlignment="Right"
                        VerticalAlignment="Center"
                        Orientation="Horizontal"
                        Spacing="4">
                        <Border
                            Width="24"
                            Height="16"
                            Background="#1A1F71"
                            CornerRadius="2">
                            <TextBlock
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center"
                                FontSize="8"
                                FontWeight="Bold"
                                Foreground="White"
                                Text="VISA" />
                        </Border>
                        <Border
                            Width="24"
                            Height="16"
                            CornerRadius="2">
                            <Border.Background>
                                <LinearGradientBrush StartPoint="0%,50%" EndPoint="100%,50%">
                                    <GradientStop Offset="0" Color="#EB001B" />
                                    <GradientStop Offset="0.5" Color="#F79E1B" />
                                    <GradientStop Offset="1" Color="#FF5F00" />
                                </LinearGradientBrush>
                            </Border.Background>
                        </Border>
                    </StackPanel>
                </Grid>

                <!--  MM/YY and CVC  -->
                <Grid ColumnDefinitions="*,*" ColumnSpacing="8">
                    <TextBox
                        Grid.Column="0"
                        MaxLength="5"
                        Text="{Binding ExpiryDate}"
                        Watermark="MM/YY" />
                    <TextBox
                        Grid.Column="1"
                        MaxLength="3"
                        Text="{Binding Cvc}"
                        Watermark="CVC" />
                </Grid>
            </StackPanel>

            <!--  Submit Button  -->
            <Button
                Classes="SubmitButton"
                Command="{Binding SubmitPaymentCommand}"
                IsEnabled="{Binding !IsProcessing}"
                IsVisible="{Binding HasTickets}">
                <TextBlock Text="{Binding SubmitButtonText}" />
            </Button>

            <!--  Or Divider  -->
            <Grid
                ColumnDefinitions="*,Auto,*"
                ColumnSpacing="12"
                IsVisible="{Binding HasTickets}">
                <Border
                    Grid.Column="0"
                    Height="1"
                    VerticalAlignment="Center"
                    Background="#E0E0E0" />
                <TextBlock
                    Grid.Column="1"
                    FontSize="12"
                    Foreground="#999999"
                    Text="or" />
                <Border
                    Grid.Column="2"
                    Height="1"
                    VerticalAlignment="Center"
                    Background="#E0E0E0" />
            </Grid>

            <!--  Google Pay Button  -->
            <Button
                Classes="GooglePayButton"
                Command="{Binding PayWithGooglePayCommand}"
                IsEnabled="{Binding !IsProcessing}"
                IsVisible="{Binding HasTickets}">
                <StackPanel HorizontalAlignment="Center" Orientation="Horizontal">
                    <TextBlock Margin="0,0,5,0" Text="Pay with" />
                    <TextBlock
                        FontWeight="SemiBold"
                        Foreground="#4285F4"
                        Text="G" />
                    <TextBlock
                        FontWeight="SemiBold"
                        Foreground="#EA4335"
                        Text="o" />
                    <TextBlock
                        FontWeight="SemiBold"
                        Foreground="#FBBC05"
                        Text="o" />
                    <TextBlock
                        FontWeight="SemiBold"
                        Foreground="#4285F4"
                        Text="g" />
                    <TextBlock
                        FontWeight="SemiBold"
                        Foreground="#34A853"
                        Text="l" />
                    <TextBlock
                        FontWeight="SemiBold"
                        Foreground="#EA4335"
                        Text="e" />
                    <TextBlock FontWeight="SemiBold" Text=" Pay" />
                </StackPanel>
            </Button>

            <!--  Empty Cart Message  -->
            <Border
                Padding="40,60"
                Background="White"
                BoxShadow="0 2 8 0 #20000000"
                CornerRadius="12"
                IsVisible="{Binding !HasTickets}">
                <StackPanel HorizontalAlignment="Center" Spacing="16">
                    <TextBlock
                        FontSize="48"
                        Foreground="#E0E0E0"
                        Text="ðŸ›’"
                        TextAlignment="Center" />
                    <TextBlock
                        FontSize="16"
                        FontWeight="SemiBold"
                        Foreground="#999999"
                        Text="Your cart is empty"
                        TextAlignment="Center" />
                    <TextBlock
                        FontSize="12"
                        Foreground="#CCCCCC"
                        Text="No tickets in your cart"
                        TextAlignment="Center" />
                </StackPanel>
            </Border>
        </StackPanel>
    </ScrollViewer>
</UserControl>