<UserControl
    x:Class="Eventa.Controls.ImageCarousel"
    xmlns="https://github.com/avaloniaui"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:asyncImageLoader="clr-namespace:AsyncImageLoader;assembly=AsyncImageLoader.Avalonia"
    xmlns:controls="clr-namespace:Eventa.Controls"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">
    <UserControl.Styles>
        <Style Selector="Button.nav-button">
            <Setter Property="Background" Value="Transparent" />
            <Setter Property="BorderThickness" Value="0" />
            <Setter Property="Padding" Value="8" />
            <Setter Property="Cursor" Value="Hand" />
        </Style>
        <Style Selector="Button.nav-button:pointerover">
            <Setter Property="Opacity" Value="0.7" />
        </Style>
        <Style Selector="Button.dot-button">
            <Setter Property="Width" Value="32" />
            <Setter Property="Height" Value="32" />
            <Setter Property="Padding" Value="0" />
            <Setter Property="Background" Value="Transparent" />
            <Setter Property="BorderThickness" Value="0" />
            <Setter Property="Cursor" Value="Hand" />
        </Style>
        <Style Selector="Border.dot">
            <Setter Property="Width" Value="12" />
            <Setter Property="Height" Value="12" />
            <Setter Property="CornerRadius" Value="6" />
            <Setter Property="Background" Value="#D9D9D9" />
        </Style>
        <Style Selector="Border.dot.active">
            <Setter Property="Background" Value="#FF6B9D" />
        </Style>
    </UserControl.Styles>
    <Grid RowDefinitions="Auto,*,Auto">
        <!--  Navigation Arrows  -->
        <Button
            Name="PrevButton"
            Grid.Row="1"
            HorizontalAlignment="Left"
            VerticalAlignment="Center"
            Classes="nav-button"
            Click="OnPrevClick">
            <Path
                Width="24"
                Height="24"
                Data="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"
                Fill="#FF6B9D"
                Stretch="Uniform">
                <Path.RenderTransform>
                    <TranslateTransform X="2" />
                </Path.RenderTransform>
            </Path>
        </Button>
        <Button
            Name="NextButton"
            Grid.Row="1"
            HorizontalAlignment="Right"
            VerticalAlignment="Center"
            Classes="nav-button"
            Click="OnNextClick">
            <Path
                Width="24"
                Height="24"
                Data="M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"
                Fill="#FF6B9D"
                Stretch="Uniform">
                <Path.RenderTransform>
                    <TranslateTransform X="5" />
                </Path.RenderTransform>
            </Path>
        </Button>
        <!--  Carousel  -->
        <Border
            Grid.Row="1"
            Margin="40,0"
            Background="#E0E0E0"
            CornerRadius="8">
            <Carousel
                Name="MainCarousel"
                ClipToBounds="True"
                SelectedIndex="{Binding CurrentIndex, RelativeSource={RelativeSource AncestorType=controls:ImageCarousel}, Mode=TwoWay}">
                <Carousel.ItemTemplate>
                    <DataTemplate>
                        <asyncImageLoader:AdvancedImage
                            
                            Source="{Binding}"
                            Stretch="Uniform" />
                    </DataTemplate>
                </Carousel.ItemTemplate>
                <Carousel.PageTransition>
                    <PageSlide Orientation="Horizontal" Duration="0:00:00.3">
                        <PageSlide.SlideOutEasing>
                            <CubicEaseInOut />
                        </PageSlide.SlideOutEasing>
                        <PageSlide.SlideInEasing>
                            <CubicEaseInOut />
                        </PageSlide.SlideInEasing>
                    </PageSlide>
                </Carousel.PageTransition>
            </Carousel>
        </Border>
        <!--  Dot Indicators  -->
        <Border
            Grid.Row="2"
            Margin="0,16,0,0"
            Padding="16,12"
            HorizontalAlignment="Center"
            Background="White"
            BorderBrush="#E0E0E0"
            BorderThickness="1"
            CornerRadius="24">
            <WrapPanel
                Name="DotsPanel"
                MaxWidth="220"
                Orientation="Horizontal" />
        </Border>
    </Grid>
</UserControl>